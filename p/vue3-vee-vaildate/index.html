<!doctype html><html lang=zh-tw><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Vue 3 è¡¨å–®é©—è­‰ Vee Vaildate 4 (ä½¿ç”¨çµ„åˆå¼API) VeeValidDate Docs
æœ¬æ–‡å¯«ä½œæ™‚ä½¿ç”¨
 Vue 3.2.45 Vite 4.0.0 TypeScript 4.9.3 vee-validate 4.7.4  useField value import { useField } from 'vee-validate';  const { value } = useField('username'); useField çš„ç¬¬ä¸€å€‹åƒæ•¸æ˜¯å¿…å¡«ï¼ŒVeeValidDate ç”¨ä¾†è¾¨è­˜æ¬„ä½çš„ keyã€‚
value æ˜¯ä¸€å€‹ Ref ï¼Œç”¨ v-model æ¥åˆ° input ä¸Šé¢ï¼Œvalue æœƒè·Ÿè‘—ä½¿ç”¨è€…è¼¸å…¥æ”¹è®Šã€‚
<input type=&#34;text&#34; v-model=&#34;value&#34;/> errorMessage useField çš„ç¬¬äºŒå€‹åƒæ•¸å¯ä»¥å‚³å…¥ä¸€å€‹å‡½å¼ï¼Œæ¯æ¬¡ value æ”¹è®Šçš„æ™‚å€™é€™å€‹å‡½å¼éƒ½æœƒè¢«å‘¼å«ï¼Œç”¨ä¾†é©—è­‰ value ç¬¦ä¸ç¬¦åˆè¦å‰‡ï¼Œå¦‚æœç¬¦åˆè¦å‰‡å°±å›å‚³ trueï¼›åä¹‹å›å‚³ string ä½œç‚º errorMessageã€‚
ä»¥ä¸‹æˆ‘è‡ªè¨‚ä¸€å€‹è¦å‰‡å‡½å¼ï¼Œé©—è­‰ value çš„å€¼å¿…é ˆæ˜¯ fooï¼š
function isFoo(value: string | undefined) {  if (value === 'foo') {  return true;  }  return 'username must be &#34;foo&#34;!"><title>Vue 3 è¡¨å–®é©—è­‰ Vee Vaildate 4 (ä½¿ç”¨çµ„åˆå¼API) - Sayoko123f</title><link href=/css/output.min.c4693ba68e9ecf89a2003aee7767c665b633b7af354308c30bf4572b43a5588c.css rel=stylesheet><script src=/js/devblog.min.a33f45493dcfb1bd5d05eefcfbdc20ae2e6c793c0937d22bf03fddbe18bbdc0b.js defer></script>
<script>localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")</script></head><body class="bg-gray-50 text-black dark:bg-[#121212] dark:text-gray-100"><header class="flex h-11 items-center border-b border-black/20 px-4 dark:border-white/40"><nav class="mx-auto flex w-full max-w-4xl justify-between"><ul class="flex gap-4"><li><a class=font-bold href=https://sayoko123f.github.io/>é¦–é </a></li><li><a class=font-bold href=https://sayoko123f.github.io/p/>æ–‡ç« åˆ—è¡¨</a></li><li><a class=font-bold href=https://sayoko123f.github.io/about/>é—œæ–¼</a></li><li><a class=font-bold href=https://sayoko123f.github.io/tags/>åˆ†é¡</a></li></ul><ul class="flex gap-4"><li class="h-6 w-6"><a href=https://github.com/Sayoko123f title=github><svg xmlns="http://www.w3.org/2000/svg" class="w-full h-full" viewBox="0 0 24 24"><path fill="currentcolor" d="M10.898438 2.101562c-4.597657.5-8.296876 4.199219-8.796876 8.699219-.5 4.699219 2.199219 8.898438 6.296876 10.5C8.699219 21.398438 9 21.199219 9 20.800781V19.199219S8.601562 19.300781 8.101562 19.300781c-1.402343.0-2-1.199219-2.101562-1.902343C5.898438 17 5.699219 16.699219 5.398438 16.398438 5.101562 16.300781 5 16.300781 5 16.199219 5 16 5.300781 16 5.398438 16 6 16 6.5 16.699219 6.699219 17c.5.800781000000001 1.101562 1 1.402343 1C8.5 18 8.800781 17.898438 9 17.800781 9.101562 17.101562 9.398438 16.398438 10 16c-2.300781-.5-4-1.800781-4-4 0-1.101562.5-2.199219 1.199219-3C7.101562 8.800781 7 8.300781 7 7.601562c0-.402343.0-1 .300781-1.601562.0.0 1.398438.0 2.800781 1.300781C10.601562 7.101562 11.300781 7 12 7s1.398438.101562 2 .300781C15.300781 6 16.800781 6 16.800781 6 17 6.601562 17 7.199219 17 7.601562 17 8.398438 16.898438 8.800781 16.800781 9 17.5 9.800781 18 10.800781 18 12c0 2.199219-1.699219 3.5-4 4 .601562.5 1 1.398438 1 2.300781v2.597657C15 21.199219 15.300781 21.5 15.699219 21.398438 19.398438 19.898438 22 16.300781 22 12.101562c0-6-5.101562-10.703124-11.101562-10zm0 0"/></svg></a></li><li class="h-6 w-6"><button class=text-sky-500 aria-label="toggle light dark mode"><svg class="inline-block h-full w-full dark:hidden" id="light-mode-button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1A1 1 0 119 4V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707A1 1 0 1113.536 5.05l.707-.707a1 1 0 011.414.0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707A1 1 0 004.343 5.757l.707.707zm1.414 8.486-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"/></svg><svg class="hidden h-full w-full dark:inline-block" id="dark-mode-button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentcolor"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001.0 1010.586 10.586z"/></svg></button></li></ul></nav></header><div class="flex justify-center"><div class="hidden w-1/5 flex-grow lg:block"></div><div class="w-full max-w-2xl" id=content><main class=px-4><div class=py-4><div class=pb-2>2023å¹´2æœˆ19æ—¥</div><div class="flex gap-1 flex-wrap"><a class="rounded bg-stone-200 dark:bg-stone-800 px-2 py-1" href=https://sayoko123f.github.io/tags/vue/>Vue</a><a class="rounded bg-stone-200 dark:bg-stone-800 px-2 py-1" href=https://sayoko123f.github.io/tags/typescript/>TypeScript</a></div></div><article class="prose max-w-none dark:prose-invert"><h1 id=vue-3-è¡¨å–®é©—è­‰-vee-vaildate-4-ä½¿ç”¨çµ„åˆå¼api>Vue 3 è¡¨å–®é©—è­‰ Vee Vaildate 4 (ä½¿ç”¨çµ„åˆå¼API)</h1><p><a href=https://vee-validate.logaretm.com/v4/guide/overview/>VeeValidDate Docs</a></p><p>æœ¬æ–‡å¯«ä½œæ™‚ä½¿ç”¨</p><ul><li>Vue 3.2.45</li><li>Vite 4.0.0</li><li>TypeScript 4.9.3</li><li>vee-validate 4.7.4</li></ul><h2 id=usefield>useField</h2><h3 id=value>value</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useField</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;vee-validate&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>value</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useField</span>(<span style=color:#e6db74>&#39;username&#39;</span>);
</span></span></code></pre></div><p><code>useField</code> çš„ç¬¬ä¸€å€‹åƒæ•¸æ˜¯å¿…å¡«ï¼ŒVeeValidDate ç”¨ä¾†è¾¨è­˜æ¬„ä½çš„ <code>key</code>ã€‚</p><p><code>value</code> æ˜¯ä¸€å€‹ <code>Ref</code> ï¼Œç”¨ <code>v-model</code> æ¥åˆ° <code>input</code> ä¸Šé¢ï¼Œ<code>value</code> æœƒè·Ÿè‘—ä½¿ç”¨è€…è¼¸å…¥æ”¹è®Šã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value&#34;</span>/&gt;
</span></span></code></pre></div><h3 id=errormessage>errorMessage</h3><p><code>useField</code> çš„ç¬¬äºŒå€‹åƒæ•¸å¯ä»¥å‚³å…¥ä¸€å€‹å‡½å¼ï¼Œæ¯æ¬¡ <code>value</code> æ”¹è®Šçš„æ™‚å€™é€™å€‹å‡½å¼éƒ½æœƒè¢«å‘¼å«ï¼Œç”¨ä¾†é©—è­‰ <code>value</code> ç¬¦ä¸ç¬¦åˆè¦å‰‡ï¼Œå¦‚æœç¬¦åˆè¦å‰‡å°±å›å‚³ <code>true</code>ï¼›åä¹‹å›å‚³ <code>string</code> ä½œç‚º <code>errorMessage</code>ã€‚</p><p>ä»¥ä¸‹æˆ‘è‡ªè¨‚ä¸€å€‹è¦å‰‡å‡½å¼ï¼Œé©—è­‰ <code>value</code> çš„å€¼å¿…é ˆæ˜¯ <code>foo</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isFoo</span>(<span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;foo&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;username must be &#34;foo&#34;!&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>errorMessage</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useField</span>(<span style=color:#e6db74>&#39;username&#39;</span>, <span style=color:#a6e22e>isFoo</span>);
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>p</span>&gt;{{ errorMessage }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span></code></pre></div><p>æ¯æ¬¡ç•¶ <code>value</code> æ”¹è®Šæ™‚å°±æœƒè§¸ç™¼é©—è­‰å‡½å¼ <code>isFoo</code>ã€‚</p><h2 id=useform>useForm</h2><p><code>useForm</code> å¯ä»¥è·Ÿ <code>useField</code> æ­é…ä½¿ç”¨ï¼Œ<strong>å¿…é ˆå…ˆå‘¼å« useForm å†å‘¼å« useField</strong>ã€‚</p><p>å…ˆå¯«ä¸€å€‹ <code>validationSchema</code> ï¼Œå®ƒæ˜¯ä¸€å€‹ç‰©ä»¶ï¼Œ<code>key</code> æ˜¯ <code>useField</code> ç¬¬ä¸€å€‹åƒæ•¸è¨»å†Šçš„æ¬„ä½ <code>key</code>ï¼Œå±¬æ€§å‰‡æ˜¯ç”¨ä¾†é©—è­‰çš„è¦å‰‡å‡½å¼ã€‚</p><p>ä»¥ä¸‹æˆ‘å¯«ä¸€å€‹æœ‰ <code>username, password</code> å…©å€‹æ¬„ä½çš„ Schema ï¼Œè¦å‰‡æ˜¯ <code>username</code> å¿…é ˆæ˜¯ <code>foo</code>ï¼Œ<code>password</code> å¿…é ˆå¤§æ–¼ 3ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useField</span>, <span style=color:#a6e22e>useForm</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;vee-validate&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>validationSchema</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>username</span>(<span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;foo&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Username must be &#34;foo&#34;.&#39;</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>password</span>(<span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Password length must be greater than 3.&#39;</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>form</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useForm</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>validationSchema</span>,
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>æ¥ä¸‹ä¾†ç”¨ <code>useField</code> é€£æ¥ <code>&lt;template></code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>usernameValue</span>, <span style=color:#a6e22e>errorMessage</span>: <span style=color:#66d9ef>usernameError</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useField</span>(<span style=color:#e6db74>&#39;username&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>value</span>: <span style=color:#66d9ef>passwordValue</span>, <span style=color:#a6e22e>errorMessage</span>: <span style=color:#66d9ef>passwordError</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useField</span>(<span style=color:#e6db74>&#39;password&#39;</span>);
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;usernameValue&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>p</span>&gt;{{ usernameError }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;passwordValue&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>p</span>&gt;{{ passwordError }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span></code></pre></div><p>é€™æ¨£å°±æœ‰è‡ªå‹•é©—è­‰çš„æ•ˆæœäº†ã€‚</p><p>æ¥ä¸‹ä¾†æˆ‘å€‘è¦åŠ ä¸Šä¸€é¡†æäº¤è¡¨å–®çš„æŒ‰éˆ•èˆ‡å‡½å¼ï¼Œè¦ç”¨åˆ° <code>useForm</code> çš„ <code>handleSubmit</code>ï¼Œå‡è¨­æˆ‘å€‘æäº¤è¡¨å–®çµ¦å¾Œç«¯çš„ API function å«åš <code>createUser</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>createUserParams</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>username</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>password</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>params</span>: <span style=color:#66d9ef>createUserParams</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>params</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// call api...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>onSubmit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>handleSubmit</span>(<span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>values</span>) <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>values</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>é€™è£¡æœ‰ä¸€æ­¥è¦å›é ­å‚³å…¥æ³›å‹å®šç¾©çµ¦ <code>useForm</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>form</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useForm</span>&lt;<span style=color:#f92672>createUserParams</span>&gt;({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>validationSchema</span>,
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>æœ€å¾Œï¼Œå†å¹«æŒ‰éˆ•åŠ ä¸Š <code>disabled</code> åŠŸèƒ½ï¼Œè¡¨å–®é©—è­‰é€šéå‰æ‡‰è©²æ˜¯ç¦ç”¨ç‹€æ…‹ï¼Œæˆ‘å€‘å¯ä»¥åˆ¤æ–· form.meta è£¡é¢çš„ valid èˆ‡ dirty å±¬æ€§ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>computed</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>shouldDisabled</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>!</span>(<span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>dirty</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>valid</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>ä»¥ä¸‹é™„ä¸Šå®Œæ•´çµ„ä»¶ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;p-4&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;usernameValue&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>p</span>&gt;{{ usernameError }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;passwordValue&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>p</span>&gt;{{ passwordError }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;shouldDisabled&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;onSubmit&#34;</span>&gt;Submit&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>computed</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useField</span>, <span style=color:#a6e22e>useForm</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vee-validate&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>validationSchema</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>username</span>(<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;foo&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Username must be &#34;foo&#34;.&#39;</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>password</span>(<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Password length must be greater than 3.&#39;</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>form</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useForm</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>createUserParams</span><span style=color:#f92672>&gt;</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>validationSchema</span>,
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>usernameValue</span>, <span style=color:#a6e22e>errorMessage</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>usernameError</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useField</span>(<span style=color:#e6db74>&#39;username&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>passwordValue</span>, <span style=color:#a6e22e>errorMessage</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>passwordError</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useField</span>(<span style=color:#e6db74>&#39;password&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>createUserParams</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>password</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createUserParams</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>params</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// call api...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>onSubmit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>handleSubmit</span>(<span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>values</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>values</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>shouldDisabled</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>!</span>(<span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>dirty</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>valid</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div><h2 id=usefieldmodel>useFieldModel</h2><p>å¤šæ¬¡å‘¼å« Field çš„èªæ³•ç³–ï¼Œå¯ä»¥æŠŠä¸Šé¢ useForm çš„ä¾‹å­æ”¹å¯«æˆï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;p-4&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;username&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>p</span>&gt;{{ form.errors.value.username }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>input</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#a6e22e>v-model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>p</span>&gt;{{ form.errors.value.password }}&lt;/<span style=color:#f92672>p</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>button</span> <span style=color:#a6e22e>:disabled</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;shouldDisabled&#34;</span> <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>click</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;onSubmit&#34;</span>&gt;Submit&lt;/<span style=color:#f92672>button</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>computed</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useForm</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;vee-validate&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>validationSchema</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>username</span>(<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;foo&#39;</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Username must be &#34;foo&#34;.&#39;</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>password</span>(<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Password length must be greater than 3.&#39;</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>form</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useForm</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>createUserParams</span><span style=color:#f92672>&gt;</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>validationSchema</span>,
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>username</span>, <span style=color:#a6e22e>password</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>useFieldModel</span>([<span style=color:#e6db74>&#39;username&#39;</span>, <span style=color:#e6db74>&#39;password&#39;</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>createUserParams</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>password</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>some</span><span style=color:#f92672>:</span><span style=color:#a6e22e>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>params</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createUserParams</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>params</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// call api...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>onSubmit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>handleSubmit</span>(<span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>values</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>values</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>shouldDisabled</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>computed</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#f92672>!</span>(<span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>dirty</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>form</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>valid</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span></code></pre></div></article><div class="mt-8 border-t py-4"><div class="flex justify-between gap-8"><div class=w-1/2><a href=https://sayoko123f.github.io/p/docker-memo/>ä¸Šä¸€ç¯‡æ–‡ç« <br>ã€å­¸Dockerã€‘åè©è§£é‡‹èˆ‡ç­†è¨˜</a></div><div class="w-1/2 text-right"><a href=https://sayoko123f.github.io/p/type-fest-note/>ä¸‹ä¸€ç¯‡æ–‡ç« <br>type-fest ç­†è¨˜</a></div></div></div></main></div><div class="relative hidden w-1/5 flex-grow lg:block"><aside class="fixed mt-3 h-full max-h-[calc(100vh-8rem)] overflow-y-auto break-all"><nav id=TableOfContents><ul><li><a href=#usefield>useField</a><ul><li><a href=#value>value</a></li><li><a href=#errormessage>errorMessage</a></li></ul></li><li><a href=#useform>useForm</a></li><li><a href=#usefieldmodel>useFieldModel</a></li></ul></nav></aside></div></div><footer class="mt-8 border-t border-black/20 py-4 dark:border-white/40"><div class="flex flex-col items-center justify-center"><button id=goto-top-button class="opacity-60 hover:opacity-100" aria-label="scroll to top">
å›æœ€ä¸Šæ–¹ğŸ”º</button><div class=py-2><a class="inline-block h-6 w-6 opacity-60 hover:opacity-100" href=https://github.com/Sayoko123f title=Github><svg xmlns="http://www.w3.org/2000/svg" class="w-full h-full" viewBox="0 0 24 24"><path fill="currentcolor" d="M10.898438 2.101562c-4.597657.5-8.296876 4.199219-8.796876 8.699219-.5 4.699219 2.199219 8.898438 6.296876 10.5C8.699219 21.398438 9 21.199219 9 20.800781V19.199219S8.601562 19.300781 8.101562 19.300781c-1.402343.0-2-1.199219-2.101562-1.902343C5.898438 17 5.699219 16.699219 5.398438 16.398438 5.101562 16.300781 5 16.300781 5 16.199219 5 16 5.300781 16 5.398438 16 6 16 6.5 16.699219 6.699219 17c.5.800781000000001 1.101562 1 1.402343 1C8.5 18 8.800781 17.898438 9 17.800781 9.101562 17.101562 9.398438 16.398438 10 16c-2.300781-.5-4-1.800781-4-4 0-1.101562.5-2.199219 1.199219-3C7.101562 8.800781 7 8.300781 7 7.601562c0-.402343.0-1 .300781-1.601562.0.0 1.398438.0 2.800781 1.300781C10.601562 7.101562 11.300781 7 12 7s1.398438.101562 2 .300781C15.300781 6 16.800781 6 16.800781 6 17 6.601562 17 7.199219 17 7.601562 17 8.398438 16.898438 8.800781 16.800781 9 17.5 9.800781 18 10.800781 18 12c0 2.199219-1.699219 3.5-4 4 .601562.5 1 1.398438 1 2.300781v2.597657C15 21.199219 15.300781 21.5 15.699219 21.398438 19.398438 19.898438 22 16.300781 22 12.101562c0-6-5.101562-10.703124-11.101562-10zm0 0"/></svg></a></div><div class="text-sm opacity-60">Â© 2023 Sayoko123f Powered
By Hugo</div></div></footer></body></html>